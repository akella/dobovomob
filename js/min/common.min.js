head.ready(function(){function e(){var e=$(".js-choose");e.each(function(){var e=+$(this).attr("data-max-number"),s=$(this).find("input"),i=$(this).find(".js-plus"),t=$(this).find(".js-minus");i.bind("click",function(){var i=+s.val();return i>=e?!1:(i+=1,s.val(i),void 0)}),t.bind("click",function(){var e=+s.val();return e>1?(e-=1,s.val(e),void 0):(s.val("1"),!1)})})}function s(){var e=$(".js-choose-guests");e.each(function(){var e=+$(this).attr("data-max-number"),s=$(this).find("input"),i=$(this).find(".js-choose-guests .js-plus"),t=$(this).find(".js-choose-guests .js-minus");i.bind("click",function(){var i=+s.val();return i>=e?!1:(i+=1,s.val(i),$(".js-guests").text("гостей"),void 0)}),t.bind("click",function(){var e=+s.val();return e>1?(e-=1,s.val(e),1==e&&$(".js-guests").text("гость"),void 0):!1})})}function t(){var e=$(".js-choose-apartment");e.each(function(){var e=+$(this).attr("data-max-number"),s=$(this).find("input"),i=$(this).find(".js-plus"),t=$(this).find(".js-minus");i.bind("click",function(){var i=+s.val();return i>=e?!1:(i+=1,s.val(i),void 0)}),t.bind("click",function(){var e=+s.val();return e>1?(e-=1,s.val(e),void 0):(s.val(""),!1)})})}function a(){$(".js-tab").each(function(){var e=$(this).find("a"),s=($(this).find("li"),$(this).parents(".js-tab-group").find(".js-tab-cont"));e.on("click",function(){var e=$(this).attr("href");return $(".js-tab-item").removeClass("is-active"),$(this).parent().addClass("is-active"),s.removeClass("is-active"),$(this).parents(".js-tab-group").find("."+e).addClass("is-active"),!1})})}function n(){var e=new google.maps.LatLng(-25.363882,131.044922),s={zoom:10,center:e},i=new google.maps.Map(document.getElementById("map"),s),t='<div class="popup-map"><div class="popup-map__top"><div class="popup-map__img"><img src="img/img-map.png" alt=""><div class="price-black"><strong class="price-black__top">9.1</strong><span class="price-black__bott">12 отзывов</span></div></div><div class="popup-map__right"><a href="#" class="popup-map__title">Двухуровневая квартира в самом центре столицы</a><div class="popup-map__id">(AV 2478)</div><div class="popup-map__address">Двухкомнатная</div><div class="popup-map__row"><div class="popup-map__col"><div class="popup-map__price popup-map__price_green"><span>320</span>грн. в сутки</div><p>без предоплаты</p></div><div class="popup-map__col"><div class="popup-map__price"><span>960</span>грн.</div><p>за 3 ночи</p></div></div></div></div><div class="popup-map__bottom"><button class="btn btn_green-arr">Забронировать</button></div></div>',a=new google.maps.InfoWindow({content:t,maxWidth:"1px"}),n=new google.maps.MarkerImage("img/marker2x.png",null,null,null,new google.maps.Size(20,30)),o=new google.maps.Marker({position:e,map:i,icon:n,title:"Двухуровневая квартира в самом центре столицы"});google.maps.event.addListener(o,"click",function(){a.open(i,o)})}function o(){var e=$(".calendar");$(".js-open-calendar").on("click",function(){if($(this).parents(".dropdown").find(".js-popup-calendar").show(),$("body").addClass("is-fixed"),$(".js-check-date").removeClass("is-active"),$(this).parents(".dropdown").find(".calendar").addClass("is-init"),e.hasClass("is-init")){var s=$(".calendar__day"),t=".calendar__day.in",a=".calendar__day.out";e.each(function(){$(".calendar").slick({dots:!1,slidesToShow:1,infinite:!1,adaptiveHeight:!0}),$(".slick-next, .slick-prev").on("click",function(){e.find(s).removeClass("out is-selected")}),$(".slick-prev").on("click",function(){e.find(s).removeClass("in")}),$(".calendar").on("swipe",function(){e.find(s).removeClass("out is-selected")}),$(".calendar__day").on("click",function(){{var i=$(this).index(),n="out in is-selected";$(this).parent(".calendar__days")}if(e.find(t).length){var o=$(this).parent().find(t).index();i>o?($(this).addClass("out"),$(".out").nextAll(s).removeClass("is-selected out")):o>i&&s.removeClass(n)}else $(this).addClass("in");if(e.find(a).length){var r=$(this).parent().find(a).index();i>r&&s.removeClass(n)}if($(this).parent().find(".calendar__day.is-today").length){var c=$(this).parent().find(".calendar__day.is-today").index();c>i&&$(this).removeClass(n)}s.hasClass("is-inactive")&&$(".calendar__day.is-inactive, .calendar__day.is-other-month").removeClass(n),s.hasClass("out")?$(".js-check-date").addClass("is-active"):$(".js-check-date").removeClass("is-active"),e.find(a).prevAll(s).addClass("is-selected"),e.find(t).prevAll(s).removeClass("is-selected")}),$(".js-check-date").bind("click",function(){var e=$(t).attr("date"),s=$(a).attr("date"),n=$(".datepicker__to-text"),o=$(".datepicker__from-text");n.html(s),o.html(e);var r=n.html(),c="";for(r=r.split(" "),i=0;i<r.length;i++)c=c+"<span>"+r[i]+"</span>";n.html(c);var l=o.html(),d="";for(l=l.split(" "),i=0;i<l.length;i++)d=d+"<span>"+l[i]+"</span>";return o.html(d),$(".popup").hide(),$("body").removeClass("is-fixed"),!1})}),e.find(".calendar__day.is-today").prevAll(".calendar__day").addClass("is-last-days"),e.find(".calendar__day").addClass("is-other-month"),e.find(".calendar__day span").parent().removeClass("is-other-month")}})}function r(){$(".js-toggle").on("change",function(){$(this).is(":checked")?($(this).parent().parent().addClass("is-active"),$(".select-chosen").trigger("chosen:activate")):$(this).parent().parent().removeClass("is-active")})}function c(){var e=$(".js-discounts-day"),s=$(".datepicker__to-text"),t=$(".datepicker__from-text");e.on("click",function(){var e=$(this).attr("date-from"),a=$(this).attr("date-to"),n=$(this).attr("href");$("html, body").animate({scrollTop:$(n).offset().top},600),s.html(a),t.html(e);var o=s.html(),r="";for(o=o.split(" "),i=0;i<o.length;i++)r=r+"<span>"+o[i]+"</span>";s.html(r);var c=t.html(),l="";for(c=c.split(" "),i=0;i<c.length;i++)l=l+"<span>"+c[i]+"</span>";return t.html(l),!1})}$("body").on("click",function(){$(".js-town").removeClass("is-active")}),$("body").on("click",".js-open-town",function(e){e.stopPropagation()}),$(".js-open-town").on("click",function(){$(".js-town").toggleClass("is-active")}),$(".select-chosen").chosen({template:function(e,s,i){return[e+"<span>"+i.user+"</span> "].join("")},max_selected_options:1}),$(".js-slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("init",function(){var e=$(".slider-auto .slick-slide").length;$(".js-number-total").text(e),$(".js-number-current").text("1")}),$(".slider-auto").slick({arrows:!1,dots:!1,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("beforeChange",function(e,s,i,t){t++,$(".js-number-current").text(t)}),$(".js-open").on("click",function(){var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):($(".js-open").parent().removeClass("is-active"),e.addClass("is-active"))}),e(),s(),t(),$("#from").on("click",function(){$(this).parent().parent().parent().addClass("is-active");var e=["2015-04-18","2015-04-19","2015-04-20"];$("#from").datepicker({beforeShowDay:function(s){var i=jQuery.datepicker.formatDate("yy-mm-dd",s);return[-1==e.indexOf(i)]},inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").datepicker({inline:!0,minDate:e+1,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var s=$(".datepicker__to-text").html(),t="";for(s=s.split(" "),i=0;i<s.length;i++)t=t+"<span>"+s[i]+"</span>";$(".datepicker__to-text").html(t),$(this).parent().parent().parent().removeClass("is-active")}}),$("#from").removeClass("hasDatepicker"),$("#from .ui-datepicker").hide(),$(".datepicker__from-text").text(e);var s=$(".datepicker__from-text").html(),t="";for(s=s.split(" "),i=0;i<s.length;i++)t=t+"<span>"+s[i]+"</span>";$(".datepicker__from-text").html(t)}})}),$("#to").on("click",function(){$("#to").datepicker({inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var s=$(".datepicker__to-text").html(),t="";for(s=s.split(" "),i=0;i<s.length;i++)t=t+"<span>"+s[i]+"</span>";$(".datepicker__to-text").html(t),$(this).parent().parent().parent().removeClass("is-active")}}),$(".datepicker__from-text").text("--")}),$(".js-cost-input").on("input",function(){$(this).val().length?$(".js-cost-checkbox").attr("disabled","disabled"):$(".js-cost-checkbox").removeAttr("disabled")}),$(".js-description-btn span").on("click",function(){var e=$(this).parents(".description");return e.toggleClass("is-active"),e.hasClass("is-active")?$(this).text("скрыть"):($(".js-description-btn span").text("подробное описание"),$(".description_owner .js-description-btn span").text("ПОДРОБНЕЕ О ВЛАДЕЛЬЦЕ")),!1}),$(".js-open-block").on("click",function(){var e=$(this).parent(),s=$(".js-open-block span");return e.hasClass("is-active")?(e.removeClass("is-active"),s.text("все акции и скидки")):(e.addClass("is-active"),s.text("скрыть")),!1}),$("#tabs").tabs(),$("#tabs li a").on("click",function(){var e=$(this).attr("href"),s=$(this).parents(".tabs").find(e);$(this).hasClass("is-init")||(s.find(".slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(this).addClass("is-init"))}),$(".js-clear-history").on("click",function(){var e=$(this).parents(".tabs");$(".js-history").addClass("js-hide"),e.find(".js-history").next().show(),e.find(".slider").addClass("is-init"),e.addClass("is-clear"),$(this).hasClass("is-init")||e.find(".slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1})}),a(),$(".js-open-map").on("click",n),$(".js-btn-menu").on("click",function(){$("body").toggleClass("is-fixed"),$(".js-menu").toggleClass("is-active"),$(".js-menu").removeClass("is-languages"),$(".js-menu").removeClass("is-currency")}),$(".js-open-languages").on("click",function(){return $(".js-menu").addClass("is-languages"),!1}),$(".js-close-languages").on("click",function(){return $(".js-menu").removeClass("is-languages"),!1}),$(".js-open-currency").on("click",function(){return $(".js-menu").addClass("is-currency"),!1}),$(".js-close-currency").on("click",function(){return $(".js-menu").removeClass("is-currency"),!1}),$(".js-label-languages").on("click",function(){$(".js-languages-check").text($(".js-input-languages:checked").val())}),$(".js-label-curreccu").on("click",function(){$(".js-currency-check").html($(".js-input-currency:checked").val())}),$(".js-label-people").on("click",function(){$(".js-people").html($(".js-input-people:checked").val()),$(".popup").hide(),$("body").removeClass("is-fixed")}),$(".like").on("click",function(){$(this).addClass("is-active")}),$(".js-open-popup").on("click",function(){$(this).parent().find(".popup").show(),$("body").addClass("is-fixed")}),$(".popup, .popup__close").on("click",function(){$(".popup").hide(),$("body").removeClass("is-fixed")}),$(".popup__in").click(function(e){e.stopPropagation()}),o(),$(".calendar__day").on("click",function(){}),r(),$(".js-addcomment").on("click",function(){$(this).parent().toggleClass("is-active")}),$(".js-to-change").on("click",function(){var e=$(this).attr("href");return $("html, body").animate({scrollTop:$(e).offset().top},600),!1}),c(),$(".js-accordion").on("click",function(){var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):($(".js-accordion").parent().removeClass("is-active"),e.addClass("is-active"))}),$("#form").validate({rules:{firstname:"required",lastname:"required",email:"required",password:"required",country:"required",phone:"required",textarea:"required",id:"required",code:"required"}}),$("#form1").validate({rules:{id:"required",code:"required"}}),$(".select-chosen").change(function(){$(".select-chosen").removeClass("error")}),$(".select-chosen").each(function(){var e=$("#form").data("validator");e.settings.ignore=":hidden:not(select)"})});