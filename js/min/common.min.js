head.ready(function(){function e(){var e=$(".js-choose");e.each(function(){var e=+$(this).attr("data-max-number"),t=$(this).find("input"),a=$(this).find(".js-plus"),s=$(this).find(".js-minus"),i=$(this).find(".js-choose-guests .js-plus"),n=$(this).find(".js-choose-guests .js-minus");a.bind("click",function(){var a=+t.val();return a>=e?!1:(a+=1,t.val(a),void 0)}),s.bind("click",function(){var e=+t.val();return e>1?(e-=1,t.val(e),void 0):(t.val(""),!1)}),i.bind("click",function(){var a=+t.val();return a>=e?!1:(a+=1,t.val(a),$(".js-guests").text("гостей"),void 0)}),n.bind("click",function(){var e=+t.val();return e>1?(e-=1,t.val(e),1==e&&$(".js-guests").text("гость"),void 0):!1})})}function t(){$(".js-tab").each(function(){var e=$(this).find("a"),t=($(this).find("li"),$(this).parents(".js-tab-group").find(".js-tab-cont"));e.on("click",function(){var e=$(this).attr("href");return $(".js-tab-item").removeClass("is-active"),$(this).parent().addClass("is-active"),t.removeClass("is-active"),$(this).parents(".js-tab-group").find("."+e).addClass("is-active"),!1})})}function a(){var e=new google.maps.LatLng(-25.363882,131.044922),t={zoom:10,center:e},a=new google.maps.Map(document.getElementById("map"),t),s='<div class="popup-map"><div class="popup-map__top"><div class="popup-map__img"><img src="img/img-map.png" alt=""><div class="price-black"><strong class="price-black__top">9.1</strong><span class="price-black__bott">12 отзывов</span></div></div><div class="popup-map__right"><a href="#" class="popup-map__title">Двухуровневая квартира в самом центре столицы</a><div class="popup-map__id">(AV 2478)</div><div class="popup-map__address">Двухкомнатная</div><div class="popup-map__row"><div class="popup-map__col"><div class="popup-map__price popup-map__price_green"><span>320</span>грн. в сутки</div><p>без предоплаты</p></div><div class="popup-map__col"><div class="popup-map__price"><span>960</span>грн.</div><p>за 3 ночи</p></div></div></div></div><div class="popup-map__bottom"><button class="btn btn_green-arr">Забронировать</button></div></div>',i=new google.maps.InfoWindow({content:s,maxWidth:"1px"}),n=new google.maps.MarkerImage("img/marker2x.png",null,null,null,new google.maps.Size(20,30)),o=new google.maps.Marker({position:e,map:a,icon:n,title:"Двухуровневая квартира в самом центре столицы"});google.maps.event.addListener(o,"click",function(){i.open(a,o)})}function s(){var e=$(".calendar");e.each(function(){var e=".calendar__day.in",t=".calendar__day.out";$(".calendar__day").on("click",function(){var a=$(".calendar__day"),s=$(this).index(),i=$(this).parent(".calendar__days"),n="out in is-selected";if(i.find(e).length){var o=i.find(e).index();s>o?($(this).addClass("out"),$(".out").nextAll(a).removeClass("is-selected out")):o>s&&a.removeClass(n)}else $(this).addClass("in");if(i.find(t).length){var r=i.find(t).index();s>r&&a.removeClass(n)}if(i.find(".calendar__day.is-today").length){var c=i.find(".calendar__day.is-today").index();c>s&&$(this).removeClass(n)}a.hasClass("is-inactive")&&$(".calendar__day.is-inactive, .calendar__day.is-other-month").removeClass(n),i.find(t).prevAll(a).addClass("is-selected"),i.find(e).prevAll(a).removeClass("is-selected")}),$(".js-check-date").bind("click",function(){var a=$(e).attr("date"),s=$(t).attr("date"),n=$(".datepicker__to-text"),o=$(".datepicker__from-text");n.html(s),o.html(a);var r=n.html(),c="";for(r=r.split(" "),i=0;i<r.length;i++)c=c+"<span>"+r[i]+"</span>";n.html(c);var l=o.html(),d="";for(l=l.split(" "),i=0;i<l.length;i++)d=d+"<span>"+l[i]+"</span>";return o.html(d),$(".popup").hide(),$("body").removeClass("is-fixed"),!1})})}function n(){$(".js-toggle").on("change",function(){$(this).is(":checked")?($(this).parent().parent().addClass("is-active"),$(".select-chosen").trigger("chosen:activate")):$(this).parent().parent().removeClass("is-active")})}function o(){var e=$(".js-discounts-day"),t=$(".datepicker__to-text"),a=$(".datepicker__from-text");e.on("click",function(){var e=$(this).attr("date-from"),s=$(this).attr("date-to"),n=$(this).attr("href");$("html, body").animate({scrollTop:$(n).offset().top},600),t.html(s),a.html(e);var o=t.html(),r="";for(o=o.split(" "),i=0;i<o.length;i++)r=r+"<span>"+o[i]+"</span>";t.html(r);var c=a.html(),l="";for(c=c.split(" "),i=0;i<c.length;i++)l=l+"<span>"+c[i]+"</span>";return a.html(l),!1})}$("body").on("click",function(){$(".js-town").removeClass("is-active")}),$("body").on("click",".js-open-town",function(e){e.stopPropagation()}),$(".js-open-town").on("click",function(){$(".js-town").toggleClass("is-active")}),$(".select-chosen").chosen({template:function(e,t,a){return[e+"<span>"+a.user+"</span> "].join("")},max_selected_options:1}),$(".js-slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("init",function(){var e=$(".slider-auto .slick-slide").length;$(".js-number-total").text(e),$(".js-number-current").text("1")}),$(".slider-auto").slick({arrows:!1,dots:!1,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("beforeChange",function(e,t,a,s){s++,$(".js-number-current").text(s)}),$(".js-open").on("click",function(){$(this).parent().toggleClass("is-active")}),e(),$("#from").on("click",function(){$(this).parent().parent().parent().addClass("is-active");var e=["2015-04-18","2015-04-19","2015-04-20"];$("#from").datepicker({beforeShowDay:function(t){var a=jQuery.datepicker.formatDate("yy-mm-dd",t);return[-1==e.indexOf(a)]},inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").datepicker({inline:!0,minDate:e,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var t=$(".datepicker__to-text").html(),a="";for(t=t.split(" "),i=0;i<t.length;i++)a=a+"<span>"+t[i]+"</span>";$(".datepicker__to-text").html(a),$(this).parent().parent().parent().removeClass("is-active")}}),$("#from").removeClass("hasDatepicker"),$("#from .ui-datepicker").hide(),$(".datepicker__from-text").text(e);var t=$(".datepicker__from-text").html(),a="";for(t=t.split(" "),i=0;i<t.length;i++)a=a+"<span>"+t[i]+"</span>";$(".datepicker__from-text").html(a)}})}),$("#to").on("click",function(){$("#to").datepicker({inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var t=$(".datepicker__to-text").html(),a="";for(t=t.split(" "),i=0;i<t.length;i++)a=a+"<span>"+t[i]+"</span>";$(".datepicker__to-text").html(a),$(this).parent().parent().parent().removeClass("is-active")}}),$(".datepicker__from-text").text("--")}),$(".js-cost-input").on("input",function(){$(this).val().length?$(".js-cost-checkbox").attr("disabled","disabled"):$(".js-cost-checkbox").removeAttr("disabled")}),$(".js-description-btn").on("click",function(){return $(".js-description").toggleClass("is-active"),!1}),$(".js-open-block").on("click",function(){var e=$(this).parent(),t=$(".js-open-block span");return e.hasClass("is-active")?(e.removeClass("is-active"),t.text("все акции и скидки")):(e.addClass("is-active"),t.text("скрыть")),!1}),$("#tabs").tabs(),$("#tabs li a").on("click",function(){var e=$(this).attr("href"),t=$(this).parents(".tabs").find(e);$(this).hasClass("is-init")||(t.find(".slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(this).addClass("is-init"))}),t(),$(".js-open-map").on("click",a),$(".js-btn-menu").on("click",function(){$("body").toggleClass("is-fixed"),$(".js-menu").toggleClass("is-active"),$(".js-menu").removeClass("is-languages"),$(".js-menu").removeClass("is-currency")}),$(".js-open-languages").on("click",function(){return $(".js-menu").addClass("is-languages"),!1}),$(".js-close-languages").on("click",function(){return $(".js-menu").removeClass("is-languages"),!1}),$(".js-open-currency").on("click",function(){return $(".js-menu").addClass("is-currency"),!1}),$(".js-close-currency").on("click",function(){return $(".js-menu").removeClass("is-currency"),!1}),$(".js-label-languages").on("click",function(){$(".js-languages-check").text($(".js-input-languages:checked").val())}),$(".js-label-curreccu").on("click",function(){$(".js-currency-check").html($(".js-input-currency:checked").val())}),$(".js-label-people").on("click",function(){$(".js-people").html($(".js-input-people:checked").val())}),$(".like").on("click",function(){$(this).addClass("is-active")}),$(".js-open-popup").on("click",function(){if($(this).parent().find(".popup").show(),$("body").addClass("is-fixed"),$(".popup").find(".calendar").addClass("is-init"),$(".calendar").hasClass("is-init")){{$(".calendar")}$(".calendar").find(".calendar__day.is-today").prevAll(".calendar__day").addClass("is-last-days"),$(".calendar").find(".calendar__day").addClass("is-other-month"),$(".calendar").find(".calendar__day span").parent().removeClass("is-other-month")}}),$(".popup, .popup__close").on("click",function(){$(".popup").hide(),$("body").removeClass("is-fixed")}),$(".popup__in").click(function(e){e.stopPropagation()}),s(),n(),$(".js-addcomment").on("click",function(){$(this).parent().toggleClass("is-active")}),o(),$(".js-accordion").on("click",function(){var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):($(".js-accordion").parent().removeClass("is-active"),e.addClass("is-active"))}),$("#form").validate({rules:{firstname:"required",lastname:"required",email:"required",password:"required",country:"required",phone:"required",textarea:"required",id:"required",code:"required"}}),$("#form1").validate({rules:{id:"required",code:"required"}}),$(".select-chosen").change(function(){$(".select-chosen").removeClass("error")}),$(".select-chosen").each(function(){var e=$("#form").data("validator");e.settings.ignore=":hidden:not(select)"})});