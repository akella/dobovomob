head.ready(function(){function e(){var e=$(".js-choose");e.each(function(){var e=+$(this).attr("data-max-number"),t=$(this).find("input"),i=$(this).find(".js-plus"),s=$(this).find(".js-minus"),n=$(this).find(".js-choose-guests .js-plus"),a=$(this).find(".js-choose-guests .js-minus");i.bind("click",function(){var i=+t.val();return i>=e?!1:(i+=1,t.val(i),void 0)}),s.bind("click",function(){var e=+t.val();return e>1?(e-=1,t.val(e),void 0):(t.val(""),!1)}),n.bind("click",function(){var i=+t.val();return i>=e?!1:(i+=1,t.val(i),$(".js-guests").text("гостей"),void 0)}),a.bind("click",function(){var e=+t.val();return e>1?(e-=1,t.val(e),1==e&&$(".js-guests").text("гость"),void 0):!1})})}function t(){var e=new google.maps.LatLng(-25.363882,131.044922),t={zoom:10,center:e},i=new google.maps.Map(document.getElementById("map"),t),s='<div class="popup-map"><div class="popup-map__top"><div class="popup-map__img"><img src="img/img-map.png" alt=""><div class="price-black"><strong class="price-black__top">9.1</strong><span class="price-black__bott">12 отзывов</span></div></div><div class="popup-map__right"><a href="#" class="popup-map__title">Двухуровневая квартира в самом центре столицы</a><div class="popup-map__id">(AV 2478)</div><div class="popup-map__address">Двухкомнатная</div><div class="popup-map__row"><div class="popup-map__col"><div class="popup-map__price popup-map__price_green"><span>320</span>грн. в сутки</div><p>без предоплаты</p></div><div class="popup-map__col"><div class="popup-map__price"><span>960</span>грн.</div><p>за 3 ночи</p></div></div></div></div><div class="popup-map__bottom"><button class="btn btn_green-arr">Забронировать</button></div></div>',n=new google.maps.InfoWindow({content:s,maxWidth:"1px"}),a=new google.maps.MarkerImage("img/marker2x.png",null,null,null,new google.maps.Size(20,30)),o=new google.maps.Marker({position:e,map:i,icon:a,title:"Двухуровневая квартира в самом центре столицы"});google.maps.event.addListener(o,"click",function(){n.open(i,o)})}function s(){var e=$(".calendar");e.each(function(){var e=$(".is-selected.in").attr("date"),t=$(".is-selected.out").attr("date");$(".js-check-date").bind("click",function(){var s=$(".datepicker__to-text"),n=$(".datepicker__from-text");s.html(t),n.html(e);var a=s.html(),o="";for(a=a.split(" "),i=0;i<a.length;i++)o=o+"<span>"+a[i]+"</span>";s.html(o);var c=n.html(),r="";for(c=c.split(" "),i=0;i<c.length;i++)r=r+"<span>"+c[i]+"</span>";return n.html(r),$(".popup").hide(),$("body").removeClass("is-fixed"),!1})})}function n(){$(".js-toggle").on("change",function(){$(this).is(":checked")?($(this).parent().parent().addClass("is-active"),$(".select-chosen").trigger("chosen:activate")):$(this).parent().parent().removeClass("is-active")})}function a(){var e=$(".js-discounts-day"),t=$(".datepicker__to-text"),s=$(".datepicker__from-text");e.on("click",function(){var e=$(this).attr("date-from"),n=$(this).attr("date-to"),a=$(this).attr("href");$("html, body").animate({scrollTop:$(a).offset().top},600),t.html(n),s.html(e);var o=t.html(),c="";for(o=o.split(" "),i=0;i<o.length;i++)c=c+"<span>"+o[i]+"</span>";t.html(c);var r=s.html(),l="";for(r=r.split(" "),i=0;i<r.length;i++)l=l+"<span>"+r[i]+"</span>";return s.html(l),!1})}$("body").on("click",function(){$(".js-town").removeClass("is-active")}),$("body").on("click",".js-open-town",function(e){e.stopPropagation()}),$(".js-open-town").on("click",function(){$(".js-town").toggleClass("is-active")}),$(".select-chosen").chosen({template:function(e,t,i){return[e+"<span>"+i.user+"</span> "].join("")},max_selected_options:1}),$(".slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("init",function(){var e=$(".slider-auto .slick-slide").length;$(".js-number-total").text(e),$(".js-number-current").text("1")}),$(".slider-auto").slick({arrows:!1,dots:!1,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("beforeChange",function(e,t,i,s){s++,$(".js-number-current").text(s)}),$(".js-open").on("click",function(){$(this).parent().toggleClass("is-active")}),e(),$("#from").on("click",function(){$(this).parent().parent().parent().addClass("is-active");var e=["2015-03-18","2015-03-19","2015-03-20"];$("#from").datepicker({beforeShowDay:function(t){var i=jQuery.datepicker.formatDate("yy-mm-dd",t);return[-1==e.indexOf(i)]},inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").datepicker({inline:!0,minDate:e,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var t=$(".datepicker__to-text").html(),s="";for(t=t.split(" "),i=0;i<t.length;i++)s=s+"<span>"+t[i]+"</span>";$(".datepicker__to-text").html(s),$(this).parent().parent().parent().removeClass("is-active")}}),$("#from").removeClass("hasDatepicker"),$("#from .ui-datepicker").hide(),$(".datepicker__from-text").text(e);var t=$(".datepicker__from-text").html(),s="";for(t=t.split(" "),i=0;i<t.length;i++)s=s+"<span>"+t[i]+"</span>";$(".datepicker__from-text").html(s)}})}),$("#to").on("click",function(){$("#to").datepicker({inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var t=$(".datepicker__to-text").html(),s="";for(t=t.split(" "),i=0;i<t.length;i++)s=s+"<span>"+t[i]+"</span>";$(".datepicker__to-text").html(s),$(this).parent().parent().parent().removeClass("is-active")}}),$(".datepicker__from-text").text("--")}),$(".js-cost-input").on("input",function(){$(this).val().length?$(".js-cost-checkbox").attr("disabled","disabled"):$(".js-cost-checkbox").removeAttr("disabled")}),$(".js-description-btn").on("click",function(){return $(".js-description").toggleClass("is-active"),!1}),$(".js-open-block").on("click",function(){var e=$(this).parent(),t=$(".js-open-block span");return e.hasClass("is-active")?(e.removeClass("is-active"),t.text("все акции и скидки")):(e.addClass("is-active"),t.text("скрыть")),!1}),$("#tabs").tabs(),$("#tabs li a").on("click",function(){$(".slick-slider").slick("reinit")}),$(".js-open-map").on("click",t),$(".js-btn-menu").on("click",function(){$("body").toggleClass("is-fixed"),$(".js-menu").toggleClass("is-active"),$(".js-menu").removeClass("is-languages"),$(".js-menu").removeClass("is-currency")}),$(".js-open-languages").on("click",function(){return $(".js-menu").addClass("is-languages"),!1}),$(".js-close-languages").on("click",function(){return $(".js-menu").removeClass("is-languages"),!1}),$(".js-open-currency").on("click",function(){return $(".js-menu").addClass("is-currency"),!1}),$(".js-close-currency").on("click",function(){return $(".js-menu").removeClass("is-currency"),!1}),$(".js-label-languages").on("click",function(){$(".js-languages-check").text($(".js-input-languages:checked").val())}),$(".js-label-curreccu").on("click",function(){$(".js-currency-check").html($(".js-input-currency:checked").val())}),$(".js-label-people").on("click",function(){$(".js-people").html($(".js-input-people:checked").val())}),$(".js-open-popup").on("click",function(){$(this).parent().find(".popup").show(),$("body").addClass("is-fixed")}),$(".popup, .popup__close").on("click",function(){$(".popup").hide(),$("body").removeClass("is-fixed")}),$(".popup__in").click(function(e){e.stopPropagation()}),$(".like").on("click",function(){$(this).addClass("is-active")}),s(),n(),$(".js-addcomment").on("click",function(){$(this).parent().toggleClass("is-active")}),a()});