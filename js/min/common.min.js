head.ready(function(){function e(){var e=$(".js-choose");e.each(function(){var e=+$(this).attr("data-max-number"),t=$(this).find("input"),s=$(this).find(".js-plus"),i=$(this).find(".js-minus"),a=$(this).find(".js-choose-guests .js-plus"),n=$(this).find(".js-choose-guests .js-minus");s.bind("click",function(){var s=+t.val();return s>=e?!1:(s+=1,t.val(s),void 0)}),i.bind("click",function(){var e=+t.val();return e>1?(e-=1,t.val(e),void 0):(t.val(""),!1)}),a.bind("click",function(){var s=+t.val();return s>=e?!1:(s+=1,t.val(s),$(".js-guests").text("гостей"),void 0)}),n.bind("click",function(){var e=+t.val();return e>1?(e-=1,t.val(e),1==e&&$(".js-guests").text("гость"),void 0):!1})})}function t(){$(".js-tab").each(function(){var e=$(this).find("a"),t=($(this).find("li"),$(this).parents(".js-tab-group").find(".js-tab-cont"));e.on("click",function(){var e=$(this).attr("href");return $(".js-tab-item").removeClass("is-active"),$(this).parent().addClass("is-active"),t.removeClass("is-active"),$(this).parents(".js-tab-group").find("."+e).addClass("is-active"),!1})})}function s(){var e=new google.maps.LatLng(-25.363882,131.044922),t={zoom:10,center:e},s=new google.maps.Map(document.getElementById("map"),t),i='<div class="popup-map"><div class="popup-map__top"><div class="popup-map__img"><img src="img/img-map.png" alt=""><div class="price-black"><strong class="price-black__top">9.1</strong><span class="price-black__bott">12 отзывов</span></div></div><div class="popup-map__right"><a href="#" class="popup-map__title">Двухуровневая квартира в самом центре столицы</a><div class="popup-map__id">(AV 2478)</div><div class="popup-map__address">Двухкомнатная</div><div class="popup-map__row"><div class="popup-map__col"><div class="popup-map__price popup-map__price_green"><span>320</span>грн. в сутки</div><p>без предоплаты</p></div><div class="popup-map__col"><div class="popup-map__price"><span>960</span>грн.</div><p>за 3 ночи</p></div></div></div></div><div class="popup-map__bottom"><button class="btn btn_green-arr">Забронировать</button></div></div>',a=new google.maps.InfoWindow({content:i,maxWidth:"1px"}),n=new google.maps.MarkerImage("img/marker2x.png",null,null,null,new google.maps.Size(20,30)),o=new google.maps.Marker({position:e,map:s,icon:n,title:"Двухуровневая квартира в самом центре столицы"});google.maps.event.addListener(o,"click",function(){a.open(s,o)})}function a(){var e=$(".calendar");$(".js-open-calendar").on("click",function(){if($(this).parents(".dropdown").find(".js-popup-calendar").show(),$("body").addClass("is-fixed"),$(this).parents(".dropdown").find(".calendar").addClass("is-init"),e.hasClass("is-init")){var t=$(".calendar__day"),s=".calendar__day.in",a=".calendar__day.out";e.each(function(){$(".calendar").slick({dots:!1,slidesToShow:1,infinite:!1,adaptiveHeight:!0}),$(".slick-next, .slick-prev").on("click",function(){e.find(t).removeClass("out in is-selected")}),$(".calendar").on("swipe",function(){e.find(t).removeClass("out in is-selected")}),$(".calendar__day").on("click",function(){var i=$(this).index(),n="out in is-selected",o=$(this).parent(".calendar__days");if(o.find(s).length){var r=o.find(s).index();i>r?($(this).addClass("out"),$(".out").nextAll(t).removeClass("is-selected out")):r>i&&t.removeClass(n)}else $(this).addClass("in");if(o.find(a).length){var c=o.find(a).index();i>c&&t.removeClass(n)}if(o.find(".calendar__day.is-today").length){var l=o.find(".calendar__day.is-today").index();l>i&&$(this).removeClass(n)}t.hasClass("is-inactive")&&$(".calendar__day.is-inactive, .calendar__day.is-other-month").removeClass(n),e.find(a).prevAll(t).addClass("is-selected"),e.find(s).prevAll(t).removeClass("is-selected")}),$(".js-check-date").bind("click",function(){var e=$(s).attr("date"),t=$(a).attr("date"),n=$(".datepicker__to-text"),o=$(".datepicker__from-text");n.html(t),o.html(e);var r=n.html(),c="";for(r=r.split(" "),i=0;i<r.length;i++)c=c+"<span>"+r[i]+"</span>";n.html(c);var l=o.html(),d="";for(l=l.split(" "),i=0;i<l.length;i++)d=d+"<span>"+l[i]+"</span>";return o.html(d),$(".popup").hide(),$("body").removeClass("is-fixed"),!1})}),e.find(".calendar__day.is-today").prevAll(".calendar__day").addClass("is-last-days"),e.find(".calendar__day").addClass("is-other-month"),e.find(".calendar__day span").parent().removeClass("is-other-month")}})}function n(){$(".js-toggle").on("change",function(){$(this).is(":checked")?($(this).parent().parent().addClass("is-active"),$(".select-chosen").trigger("chosen:activate")):$(this).parent().parent().removeClass("is-active")})}function o(){var e=$(".js-discounts-day"),t=$(".datepicker__to-text"),s=$(".datepicker__from-text");e.on("click",function(){var e=$(this).attr("date-from"),a=$(this).attr("date-to"),n=$(this).attr("href");$("html, body").animate({scrollTop:$(n).offset().top},600),t.html(a),s.html(e);var o=t.html(),r="";for(o=o.split(" "),i=0;i<o.length;i++)r=r+"<span>"+o[i]+"</span>";t.html(r);var c=s.html(),l="";for(c=c.split(" "),i=0;i<c.length;i++)l=l+"<span>"+c[i]+"</span>";return s.html(l),!1})}$("body").on("click",function(){$(".js-town").removeClass("is-active")}),$("body").on("click",".js-open-town",function(e){e.stopPropagation()}),$(".js-open-town").on("click",function(){$(".js-town").toggleClass("is-active")}),$(".select-chosen").chosen({template:function(e,t,s){return[e+"<span>"+s.user+"</span> "].join("")},max_selected_options:1}),$(".js-slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("init",function(){var e=$(".slider-auto .slick-slide").length;$(".js-number-total").text(e),$(".js-number-current").text("1")}),$(".slider-auto").slick({arrows:!1,dots:!1,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(".slider-auto").on("beforeChange",function(e,t,s,i){i++,$(".js-number-current").text(i)}),$(".js-open").on("click",function(){$(this).parent().toggleClass("is-active")}),e(),$("#from").on("click",function(){$(this).parent().parent().parent().addClass("is-active");var e=["2015-04-18","2015-04-19","2015-04-20"];$("#from").datepicker({beforeShowDay:function(t){var s=jQuery.datepicker.formatDate("yy-mm-dd",t);return[-1==e.indexOf(s)]},inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").datepicker({inline:!0,minDate:e,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var t=$(".datepicker__to-text").html(),s="";for(t=t.split(" "),i=0;i<t.length;i++)s=s+"<span>"+t[i]+"</span>";$(".datepicker__to-text").html(s),$(this).parent().parent().parent().removeClass("is-active")}}),$("#from").removeClass("hasDatepicker"),$("#from .ui-datepicker").hide(),$(".datepicker__from-text").text(e);var t=$(".datepicker__from-text").html(),s="";for(t=t.split(" "),i=0;i<t.length;i++)s=s+"<span>"+t[i]+"</span>";$(".datepicker__from-text").html(s)}})}),$("#to").on("click",function(){$("#to").datepicker({inline:!0,dateFormat:"d MM D",monthNamesShort:["янв.","фев.","март.","апр.","май.","июнь.","июль.","авг.","сент.","окт.","ноя.","дек."],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,minDate:0,onSelect:function(e){$("#to").removeClass("hasDatepicker"),$("#to .ui-datepicker").hide(),$(".datepicker__to-text").text(e);var t=$(".datepicker__to-text").html(),s="";for(t=t.split(" "),i=0;i<t.length;i++)s=s+"<span>"+t[i]+"</span>";$(".datepicker__to-text").html(s),$(this).parent().parent().parent().removeClass("is-active")}}),$(".datepicker__from-text").text("--")}),$(".js-cost-input").on("input",function(){$(this).val().length?$(".js-cost-checkbox").attr("disabled","disabled"):$(".js-cost-checkbox").removeAttr("disabled")}),$(".js-description-btn").on("click",function(){return $(".js-description").toggleClass("is-active"),!1}),$(".js-open-block").on("click",function(){var e=$(this).parent(),t=$(".js-open-block span");return e.hasClass("is-active")?(e.removeClass("is-active"),t.text("все акции и скидки")):(e.addClass("is-active"),t.text("скрыть")),!1}),$("#tabs").tabs(),$("#tabs li a").on("click",function(){var e=$(this).attr("href"),t=$(this).parents(".tabs").find(e);$(this).hasClass("is-init")||(t.find(".slider").slick({arrows:!1,dots:!0,infinite:!0,speed:200,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1}),$(this).addClass("is-init"))}),t(),$(".js-open-map").on("click",s),$(".js-btn-menu").on("click",function(){$("body").toggleClass("is-fixed"),$(".js-menu").toggleClass("is-active"),$(".js-menu").removeClass("is-languages"),$(".js-menu").removeClass("is-currency")}),$(".js-open-languages").on("click",function(){return $(".js-menu").addClass("is-languages"),!1}),$(".js-close-languages").on("click",function(){return $(".js-menu").removeClass("is-languages"),!1}),$(".js-open-currency").on("click",function(){return $(".js-menu").addClass("is-currency"),!1}),$(".js-close-currency").on("click",function(){return $(".js-menu").removeClass("is-currency"),!1}),$(".js-label-languages").on("click",function(){$(".js-languages-check").text($(".js-input-languages:checked").val())}),$(".js-label-curreccu").on("click",function(){$(".js-currency-check").html($(".js-input-currency:checked").val())}),$(".js-label-people").on("click",function(){$(".js-people").html($(".js-input-people:checked").val())}),$(".like").on("click",function(){$(this).addClass("is-active")}),$(".js-open-popup").on("click",function(){$(this).parent().find(".popup").show(),$("body").addClass("is-fixed")}),$(".popup, .popup__close").on("click",function(){$(".popup").hide(),$("body").removeClass("is-fixed")}),$(".popup__in").click(function(e){e.stopPropagation()}),a(),n(),$(".js-addcomment").on("click",function(){$(this).parent().toggleClass("is-active")}),o(),$(".js-accordion").on("click",function(){var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):($(".js-accordion").parent().removeClass("is-active"),e.addClass("is-active"))}),$("#form").validate({rules:{firstname:"required",lastname:"required",email:"required",password:"required",country:"required",phone:"required",textarea:"required",id:"required",code:"required"}}),$("#form1").validate({rules:{id:"required",code:"required"}}),$(".select-chosen").change(function(){$(".select-chosen").removeClass("error")}),$(".select-chosen").each(function(){var e=$("#form").data("validator");e.settings.ignore=":hidden:not(select)"})});